<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="utf-8">
  <title>GTA5 Map – Kalibriertes Koordinatensystem mit Zoom</title>
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css"
  />
  <style>
    html, body { height:100%; margin:0; }
    #map { width:100%; height:100%; }
  </style>
</head>
<body>
  <div id="map"></div>

  <script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"></script>
  <script>
    // Bildgröße in Pixel
    const imageSize = 8192;

    // GTA-Welt-Koordinaten der Bild-Ecken
    const minX = -6127.37;
    const maxX =  6758.06;
    const minY = -4059.996;
    const maxY =  8426.432;

    // Welt-Ausdehnung
    const worldWidth  = maxX - minX;
    const worldHeight = maxY - minY;

    // Maßstab Pixel ↔ Spiel-Einheiten
    const scaleX = imageSize / worldWidth;
    const scaleY = imageSize / worldHeight;

    // Transformation von Spiel-Koordinaten auf Pixel
    L.CRS.Simple.transformation = new L.Transformation(
      scaleX, -minX * scaleX,     // x → px
     -scaleY,  maxY * scaleY      // y → py
    );

    // Leaflet-Karte initialisieren
    const map = L.map('map', {
      crs: L.CRS.Simple,
      minZoom: 0,
      maxZoom: 5,
      zoom: 2,
      center: [ (maxY+minY)/2, (minX+maxX)/2 ]  // Mittelpunkt der GTA-Welt
    });

    // Kartengrenzen in Spiel-Koordinaten
    const bounds = L.latLngBounds(
      [ maxY, minX ],   // oben links
      [ minY, maxX ]    // unten rechts
    );
    map.setMaxBounds(bounds);

    // Tile-Layer mit allen Zoomstufen
    L.tileLayer('tiles/{z}/{x}/{y}.jpg', {
      tileSize:    256,
      noWrap:      true,
      bounds:      bounds,
      minZoom:     0,
      maxZoom:     5,
      maxNativeZoom: 5,
      attribution: '© DeinProjekt'
    }).addTo(map);
  </script>
</body>
</html>
